<!DOCTYPE html>
<html>

<head>
    <title>Pacman Eats the Eorld</title>
    <script>
        function game() {
            //CONSTANTS
            var canvas = document.getElementById('canvas');
            var ctx = canvas.getContext('2d')
            var canvasWidth = 800;
            var canvasHeight = 600;
            canvas.width = canvasWidth;
            canvas.height = canvasHeight;
            var startScreenGamemode = 0;
            var playGamemode = 1;
            var gameOverGamemode = 2;
            var pacmanWidth = 80;
            var pacmanHeight = 60;
            var uparrow = 38;
            var downarrow = 40

            //PREDEFINED
            var gamemode = startScreenGamemode;
            var pacman = new Image()
            pacman.src = 'pacman/' + Math.floor(Math.random() * 8) + '.png';
            var pacmanX = 50;
            var pacmanY = 280;
            var speed = 10;
            var score = 0;
            var health = 3;
            var level = 1;
            setInterval(function () { level = level + 1 }, 10000)

            function generateRandom(min, max, boolean) {
                var floor = boolean;
                if (floor) {
                    var random = Math.floor((Math.random() + min) * max + 1);
                } else {
                    var random = (Math.random()) * (max + 1) + min;
                }
                return random;
            }

            window.addEventListener('keydown', inputHandler)
            function inputHandler(event) {
                if (event.keyCode === uparrow) {
                    pacmanY = pacmanY - speed;
                } else if (event.keyCode === downarrow) {
                    pacmanY = pacmanY + speed;
                }
            }

            //STARTSCREEN
            canvas.addEventListener('click', start)

            function start() {
                gamemode = playGamemode;
            }

            //LOOP
            function loop() {
                update()
                draw()
                window.requestAnimationFrame(loop)
            }
            loop()
            //UPDATING
            function update() {
                if ((pacmanY + pacmanHeight) < 50) {
                    pacmanY = 590;
                } else if (pacmanY > 590) {
                    pacmanY = pacmanHeight - 67;
                }
            }

            //DRAWING
            function draw() {
                var orbs = {
                    yellow: {
                        draw: function() {
                            for(i = 0; i===0; i++) {
                                
                            }
                            var orb = new Image();
                            orb.src = 'orbs/yellow.png';
                            ctx.drawImage(orb, orbs.yellow.x, 400, 30, 30);
                            orbs.yellow.x -= 8
                        },
                        x: 700
                    },
                    green: function () { },
                    blue: function () { },
                    purple: function () { },
                    orange: function () { },
                    red: function () { }
                }


                function scoreboard() {
                    ctx.fillStyle = '#777';
                    ctx.fillRect(0, 0, 800, 45)
                    ctx.font = '40px arial';
                    ctx.fillStyle = 'skyblue';
                    ctx.fillText('Score: ' + score, 10, 35)
                    ctx.fillText('Health: ' + health, 180, 35)
                    ctx.fillText('Speed: ' + speed / 2, 370, 35)
                    ctx.fillText('Level: ' + level, 550, 35)
                }

                ctx.clearRect(0, 0, canvasWidth, canvasHeight)
                if (gamemode === startScreenGamemode) {
                    ctx.fillStyle = 'skyblue'
                    ctx.font = '90px "Bauhaus 93"'
                    ctx.fillText('Pacman Eats', 130, 100)
                    ctx.fillText('the World', 210, 200)
                    ctx.font = '30px arial'
                    ctx.fillText('powered by gearup', 270, 570)
                }

                if (gamemode === playGamemode) {
                    ctx.drawImage(pacman, pacmanX, pacmanY, pacmanWidth, pacmanHeight);
                    scoreboard()
                    setInterval(orbs.yellow.draw(), 3000)
                }
            }
        } 
    </script>
    <style>
        #canvas {
            background-color: black;
        }
    </style>
</head>

<body onload="game()">
    <canvas id="canvas"></canvas>
</body>

</html>